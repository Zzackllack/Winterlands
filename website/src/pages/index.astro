---
import { getCollection } from 'astro:content';
import FeatureCarousel from '../components/islands/FeatureCarousel.tsx';
import Hero from '../components/islands/Hero.tsx';
import SectionHeading from '../components/ui/SectionHeading.astro';
import BaseLayout from '../layouts/BaseLayout.astro';
import { featuredMods } from '../lib/data';
import { env } from '../lib/env';
import "../styles/global.css";

const allMods = await getCollection('mods');
const showcaseMods = featuredMods(allMods).slice(0, 3);

const features = [
  {
    title: 'Motion-crafted storytelling',
    summary: 'Seasonal questlines and cinematic shaders are wired directly into our datapacks to keep narratives fresh.',
    icon: 'Story',
  },
  {
    title: 'Ops automation',
    summary: 'Scripts under modpack/scripts keep CI, manual-download caches, and analyzer output in sync.',
    icon: 'Ops',
  },
  {
    title: 'Export ready',
    summary: 'packwiz refresh + dual exports (Modrinth & CurseForge) are just a single CLI away.',
    icon: 'CI/CD',
  },
];
const { modrinthUrl } = env;
---
<BaseLayout title="Winterlands Modpack">
  <Hero client:load modrinthUrl={modrinthUrl} />

  <section class="mx-auto mt-16 max-w-6xl px-6">
    <SectionHeading
      eyebrow="Featured Mods"
      title="Curated experiences"
      description="A rotating highlight of the client + server tech driving the frost."
    />
    <div class="grid gap-6 md:grid-cols-3">
      {showcaseMods.map((mod) => (
        <article class="frosted-panel p-6">
          <p class="text-xs uppercase tracking-[0.3em] text-white/60">{mod.data.side}</p>
          <h3 class="mt-2 font-display text-2xl text-white">{mod.data.name}</h3>
          <p class="mt-3 text-white/70">{mod.body}</p>
          <p class="mt-4 text-sm text-white/60">Version {mod.data.version}</p>
        </article>
      ))}
    </div>
  </section>

  <section class="mx-auto mt-20 max-w-6xl px-6">
    <SectionHeading
      eyebrow="Pipeline"
      title="Why studios pick Winterlands"
      description="We obsess over the tooling so you can obsess over the screenshots."
    />
    <FeatureCarousel client:visible features={features} />
  </section>
</BaseLayout>
